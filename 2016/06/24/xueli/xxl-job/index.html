<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 《分布式任务调度平台xxl-job》 · w4c101</title><meta name="description" content="《分布式任务调度平台xxl-job》 - w4c101"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/header.jpg"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/header.jpg"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/w4c101" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/about" target="_self" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">《分布式任务调度平台xxl-job》</h1><div class="post-info">2016年6月24日</div><div class="post-content"><blockquote>
<p>XXL-JOB是一个轻量级分布式任务调度框架，其核心设计目标是开发迅速、学习简单、轻量级、易扩展。现已开放源代码并接入多家公司线上产品线，开箱即用。</p>
</blockquote>
<a id="more"></a>
<h2 id="u4E00__u7B80_u4ECB"><a href="#u4E00__u7B80_u4ECB" class="headerlink" title="一 简介"></a>一 简介</h2><h4 id="1-1__u4E0B_u8F7D"><a href="#1-1__u4E0B_u8F7D" class="headerlink" title="1.1 下载"></a>1.1 下载</h4><p>源码地址</p>
<ul>
<li>github地址：<a href="https://github.com/xuxueli/xxl-job">https://github.com/xuxueli/xxl-job</a></li>
<li>git.osc地址：<a href="http://git.oschina.net/xuxueli0323/xxl-job" target="_blank" rel="external">http://git.oschina.net/xuxueli0323/xxl-job</a></li>
<li>我将会在两个git仓库同步发布最新代码；用户手册放置在源码“/doc”目录下（ <a href="https://github.com/xuxueli/xxl-job/tree/master/doc">https://github.com/xuxueli/xxl-job/tree/master/doc</a> ）；开箱即用；</li>
</ul>
<p>博客地址</p>
<ul>
<li>oschina地址：<a href="http://my.oschina.net/xuxueli/blog/690978" target="_blank" rel="external">http://my.oschina.net/xuxueli/blog/690978</a></li>
<li>cnblogs地址：<a href="http://www.cnblogs.com/xuxueli/p/5021979.html" target="_blank" rel="external">http://www.cnblogs.com/xuxueli/p/5021979.html</a></li>
<li>csdn地址：<a href="http://blog.csdn.net/xuxueli0323/article/details/51674330" target="_blank" rel="external">http://blog.csdn.net/xuxueli0323/article/details/51674330</a></li>
</ul>
<p>技术交流群(仅作技术交流)：367260654    <a href="http://shang.qq.com/wpa/qunwpa?idkey=4686e3fe01118445c75673a66b4cc6b2c7ce0641528205b6f403c179062b0a52" target="_blank" rel="external"><img src="http://pub.idqqimg.com/wpa/images/group.png" alt="image"></a></p>
<h4 id="1-2__u7279_u6027"><a href="#1-2__u7279_u6027" class="headerlink" title="1.2 特性"></a>1.2 特性</h4><ul>
<li>1、简单：支持通过Web页面对任务进行CRUD操作，操作简单，一分钟上手；</li>
<li>2、动态：支持动态修改任务状态、暂停/恢复任务，以及终止运行中任务，即时生效；</li>
<li>3、调度HA：“调度中心”基于集群Quartz实现，可保证调度中心HA；</li>
<li>4、任务HA：任务支持多地址配置，可保证任务HA（Failover）；</li>
<li>5、一致性：“调度中心”通过DB锁保证集群分布式调度的一致性；</li>
<li>6、自定义任务参数：支持在线配置调度任务入参，即时生效；</li>
<li>7、调度线程池：调度系统多线程触发调度运行，确保调度精确执行，不被堵塞；</li>
<li>8、执行日志：支持在线查看调度结果，并且查看完整的执行日志；</li>
<li>9、邮件报警：任务失败时支持邮件报警，同时可自定义失败次数阀值；</li>
<li>10、支持登录验证；</li>
<li>11、GLUE：提供Web IDE，支持在线开发任务逻辑代码，动态发布，实时编译生效，省略部署上线的过程。</li>
</ul>
<h4 id="1-3__u53D1_u5C55"><a href="#1-3__u53D1_u5C55" class="headerlink" title="1.3 发展"></a>1.3 发展</h4><p>于2015年中，我在github上创建XXL-JOB项目仓库并提交第一个commit，随之进行系统结构设计，UI选型，交互设计……</p>
<p>于2015-11月，XXL-JOB终于REALEASE了第一个大版本V1.0， 随后我将之发布到OSCHINA，XXL-JOB在OSCHINA上获得了@红薯的热门推荐，同期分别达到了OSCHINA的“热门动弹”排行第一和git.oschina的开源软件月热度排行第一，在此特别感谢红薯，感谢大家的关注和支持。</p>
<p>于2015-12月，我将XXL-JOB发表到我司内部知识库，并且得到内部同事认可。</p>
<p>于2016-01月我司展开XXL-JOB的内部接入和定制工作，在此感谢袁某和尹某两位同事的贡献，同时也感谢内部其他给与关注与支持的同事。</p>
<p><strong>我司大众点评目前已接入XXL-JOB，内部别名《Ferrari》（Ferrari基于XXL-JOB的V1.1版本定制而成，新接入应用推荐升级最新版本V1.3）</strong>。自2016-01-21接入至2016-05-20为止进行统计，该系统已调度40000余次，表现优异。新接入应用推荐使用最新版本V1.3，因为经过两个大版本的更新，系统的任务模型、UI交互模型以及底层调度通讯模型都有了较大的提升，核心功能更加稳定高效。</p>
<p>至今，XXL-JOB已接入多家公司的线上产品线，接入场景如电商业务，O2O业务和大数据作业等，截止2016-05-20为止，XXL-JOB已接入的公司包括不限于：</p>
<pre><code>- 1、大众点评；
- 2、山东学而网络科技有限公司；
- 3、安徽慧通互联科技有限公司；
- 4、人人聚财金服；
- 5、上海棠棣信息科技股份有限公司
- ……
</code></pre><p>欢迎大家的关注和使用，XXL-JOB也将拥抱变化，持续发展。</p>
<h4 id="1-4__u63A5_u5165_u767B_u8BB0"><a href="#1-4__u63A5_u5165_u767B_u8BB0" class="headerlink" title="1.4 接入登记"></a>1.4 接入登记</h4><p>更多接入公司，欢迎在<a href="https://github.com/xuxueli/xxl-job/issues/1">https://github.com/xuxueli/xxl-job/issues/1</a> 登记。</p>
<h4 id="1-5__u62A5_u544A_u95EE_u9898"><a href="#1-5__u62A5_u544A_u95EE_u9898" class="headerlink" title="1.5 报告问题"></a>1.5 报告问题</h4><p>XXL-JOB托管在Github上，如有问题可在ISSUES上提问，也可以加入技术交流群(仅作技术交流)：367260654 。</p>
<h4 id="1-6__u6E90_u7801_u76EE_u5F55_u8BF4_u660E"><a href="#1-6__u6E90_u7801_u76EE_u5F55_u8BF4_u660E" class="headerlink" title="1.6 源码目录说明"></a>1.6 源码目录说明</h4><ul>
<li>/xxl-job-admin                    【调度中心】：负责管理调度信息，按照调度配置发出调度请求；</li>
<li>/xxl-job-core                    公共依赖</li>
<li>/xxl-job-executor-example    【执行器】：负责接收调度请求并执行任务逻辑；</li>
<li>/db        建表脚本</li>
<li>/doc    用户手册</li>
</ul>
<h2 id="u4E8C__u603B_u4F53_u8BBE_u8BA1"><a href="#u4E8C__u603B_u4F53_u8BBE_u8BA1" class="headerlink" title="二 总体设计"></a>二 总体设计</h2><h4 id="2-1__u67B6_u6784_u56FE"><a href="#2-1__u67B6_u6784_u56FE" class="headerlink" title="2.1 架构图"></a>2.1 架构图</h4><p><img src="https://static.oschina.net/uploads/img/201606/14125314_NHk8.png" alt="XXL-JOB架构图" title="XXL-JOB架构图"></p>
<h4 id="2-2__u8BBE_u8BA1_u601D_u60F3"><a href="#2-2__u8BBE_u8BA1_u601D_u60F3" class="headerlink" title="2.2 设计思想"></a>2.2 设计思想</h4><p>将调度行为抽象形成“调度中心”公共平台，而平台自身并不承担业务逻辑，“调度中心”负责发起调度请求。</p>
<p>将任务抽象成分散的JobHandler，交由“执行器”统一管理，“执行器”负责接收调度请求并执行对应的JobHandler中业务逻辑。</p>
<p>因此，“调度”和“任务”两部分可以相互解耦，提高系统整体稳定性和扩展性；</p>
<h4 id="2-3__u7CFB_u7EDF_u7EC4_u6210"><a href="#2-3__u7CFB_u7EDF_u7EC4_u6210" class="headerlink" title="2.3 系统组成"></a>2.3 系统组成</h4><p><strong>调度模块（调度中心）</strong>：负责管理调度信息，按照调度配置发出调度请求，自身不承担业务代码。调度系统与任务解耦，提高了系统可用性和稳定性，同时调度系统性能不再受限于任务模块；</p>
<p>支持可视化、简单且动态的维管理调度信息，包括任务新建，更新，删除，GLUE开发和任务报警等，所有上述操作都会实时生效，同时支持监控调度结果以及执行日志，支持执行器Failover。</p>
<p><strong>执行模块（执行器）</strong>：负责接收调度请求并执行任务逻辑。任务模块专注于任务的执行等操作，开发和维护更加简单和高效；</p>
<p>支持接收“调度中心”的执行请求、终止请求和日志请求等。</p>
<h2 id="u4E09__u5B9E_u73B0_u539F_u7406"><a href="#u4E09__u5B9E_u73B0_u539F_u7406" class="headerlink" title="三 实现原理"></a>三 实现原理</h2><h4 id="3-1_quartz_u7684_u4E0D_u8DB3"><a href="#3-1_quartz_u7684_u4E0D_u8DB3" class="headerlink" title="3.1 quartz的不足"></a>3.1 quartz的不足</h4><p>Quartz作为开源作业调度中的佼佼者，是作业调度的首选。但是集群环境中Quartz采用API的方式对任务进行管理，从而可以避免上述问题，但是同样存在以下问题：</p>
<pre><code>- 问题一：调用API的的方式操作任务，不人性化；
- 问题二：需要持久化业务QuartzJobBean到底层数据表中，系统侵入性相当严重。
- 问题三：调度逻辑和QuartzJobBean耦合在同一个项目中，这将导致一个问题，在调度任务数量逐渐增多，同时调度任务逻辑逐渐加重的情况加，此时调度系统的性能将大大受限于业务；
</code></pre><p>XXL-JOB的调度中心基于Quartz实现，弥补了quartz的上述不足之处。</p>
<h4 id="3-2_RemoteHttpJobBean"><a href="#3-2_RemoteHttpJobBean" class="headerlink" title="3.2 RemoteHttpJobBean"></a>3.2 RemoteHttpJobBean</h4><p>常规Quartz的开发，任务逻辑一般维护在QuartzJobBean中，耦合很严重。XXL-JOB中“调度模块”和“任务模块”完全解耦，调度模块中的所有调度任务使用同一个QuartzJobBean，即RemoteHttpJobBean。不同的调度任务将各自参数维护在各自扩展表数据中，当触发RemoteHttpJobBean执行时，将会解析不同的任务参数发起远程调用，调用各自的远程执行器服务。这种调用模型类似RPC调用，RemoteHttpJobBean提供调用代理的功能，而执行器提供远程服务的功能。</p>
<h4 id="3-3__u8C03_u5EA6_u4E2D_u5FC3HA_uFF08_u96C6_u7FA4_uFF09"><a href="#3-3__u8C03_u5EA6_u4E2D_u5FC3HA_uFF08_u96C6_u7FA4_uFF09" class="headerlink" title="3.3 调度中心HA（集群）"></a>3.3 调度中心HA（集群）</h4><p>基于Quartz的集群方案，数据库选用Mysql；集群分布式并发环境中使用QUARTZ定时任务调度，会在各个节点会上报任务，存到数据库中，执行时会从数据库中取出触发器来执行，如果触发器的名称和执行时间相同，则只有一个节点去执行此任务。</p>
<p><img src="https://static.oschina.net/uploads/img/201606/14125524_GxS9.png" alt="输入图片说明" title="在这里输入图片标题"></p>
<h4 id="3-4__u8C03_u5EA6_u7EBF_u7A0B_u6C60"><a href="#3-4__u8C03_u5EA6_u7EBF_u7A0B_u6C60" class="headerlink" title="3.4 调度线程池"></a>3.4 调度线程池</h4><p>默认线程池中线程的数量为10个，避免单线程因阻塞而引起任务调度延迟。</p>
<p><img src="https://static.oschina.net/uploads/img/201606/14125549_0Knr.png" alt="输入图片说明" title="在这里输入图片标题"></p>
<h4 id="3-5_@DisallowConcurrentExecution"><a href="#3-5_@DisallowConcurrentExecution" class="headerlink" title="3.5 @DisallowConcurrentExecution"></a>3.5 @DisallowConcurrentExecution</h4><p>XXL-JOB调度模块的“调度中心”默认不使用该注解，即默认开启并行机制，因为RemoteHttpJobBean为公共QuartzJobBean，这样在多线程调度的情况下，调度模块被阻塞的几率很低，大大提高了调度系统的承载量。</p>
<p>XXL-JOB的每个调度任务虽然在调度模块是并行调度执行的，但是任务调度传递到任务模块的“执行器”确实串行执行的，同时支持任务终止。</p>
<h4 id="3-6__u65E5_u5FD7_u56DE_u8C03_u670D_u52A1"><a href="#3-6__u65E5_u5FD7_u56DE_u8C03_u670D_u52A1" class="headerlink" title="3.6 日志回调服务"></a>3.6 日志回调服务</h4><p>调度模块的“调度中心”作为Web服务单独部署，除此之外，内部嵌入jetty服务器提供日志回调服务。</p>
<p>“执行器”在接收到任务执行请求后，执行任务，在执行结束之后会将执行结果回调通知“调度中心”，如下图所示。</p>
<p><img src="https://static.oschina.net/uploads/img/201606/14125628_qON8.png" alt="输入图片说明" title="在这里输入图片标题"></p>
<h4 id="3-7__u4EFB_u52A1HA_uFF08Failover_uFF09"><a href="#3-7__u4EFB_u52A1HA_uFF08Failover_uFF09" class="headerlink" title="3.7 任务HA（Failover）"></a>3.7 任务HA（Failover）</h4><p>如下图所示，任务“执行器地址”支持配置多个，用逗号分隔，如“127.0.0.1:9998,127.0.0.1:9999”。如果任务配置多个执行器地址，当调度中心每次发起调度请求时，会按照地址配置的顺序依次对执行器发出心跳检测请求，第一个检测为存活状态的执行器将会被选定。</p>
<p><img src="https://static.oschina.net/uploads/img/201606/14125648_7kTR.png" alt="输入图片说明" title="在这里输入图片标题"></p>
<p>调度成功后，可在日志监控界面查看执行日志；</p>
<p><img src="https://static.oschina.net/uploads/img/201606/14125703_xKWj.png" alt="输入图片说明" title="在这里输入图片标题"></p>
<p>调度日志显示，任务配置的地址“227.0.0.1:9999,127.0.0.1:9999”，首先对第一个执行器地址“227.0.0.1:9999”进行心跳检测，心跳失败因此跳过；然后对第二个执行器地址“127.0.0.1:9999”进行心跳检测，心跳检测成功，选定为“目标执行器”；然后对“目标执行器”发送调度请求，调度流程结束，等待执行器回调执行结果。</p>
<p><img src="https://static.oschina.net/uploads/img/201606/14125738_xpGk.png" alt="输入图片说明" title="在这里输入图片标题"></p>
<h4 id="3-8__u8C03_u5EA6_u65E5_u5FD7_u7EC4_u6210"><a href="#3-8__u8C03_u5EA6_u65E5_u5FD7_u7EC4_u6210" class="headerlink" title="3.8 调度日志组成"></a>3.8 调度日志组成</h4><p>调度中心每次进行任务调度，都会记录一条任务日志，任务日志主要包括以下三部分内容：</p>
<pre><code>- A、任务信息：包括“执行器地址”、“JobHandler”和“执行参数”等属性，根据这些参数，可以精确的定位任务执行的具体机器和任务代码；
- B、调度信息：包括“调度时间”、“调度结果”和“调度日志”等，根据这些参数，可以了解“调度中心”发起调度请求时具体情况。
- C、执行信息：包括“执行时间”、“执行结果”和“执行日志”等，根据这些参数，可以了解在“执行器”端任务执行的具体情况；
</code></pre><p><img src="https://static.oschina.net/uploads/img/201606/14125801_9yfn.png" alt="输入图片说明" title="在这里输入图片标题"></p>
<h4 id="3-9_Bean_u6A21_u5F0F_u4EFB_u52A1"><a href="#3-9_Bean_u6A21_u5F0F_u4EFB_u52A1" class="headerlink" title="3.9 Bean模式任务"></a>3.9 Bean模式任务</h4><p>开发步骤：</p>
<pre><code>- 1、开发一个继承“IJobHandler”的实现类，任务逻辑写在execute方法中；
- 2、将任务类装配到Spring中，例如加 “@Service” 注解；
- 3、在任务类上加 “@JobHander” 注解，定义注解的name属性值；
（步骤3中定义的name属性值，在配置Bean模式任务时会用到）
</code></pre><p>原理：<br>    每个Bean模式任务都是一个Spring的Bean类实例，它被维护在“执行器”项目的Spring容器中。任务类需要加“@JobHander(name=”名称”)”注解，因为“执行器”会根据该注解识别Spring容器中的任务。任务类需要继承统一接口“IJobHandler”，任务逻辑在execute方法中开发，因为“执行器”在接收到调度中心的调度请求时，将会调用“IJobHandler”的execute方法，执行任务逻辑。</p>
<h4 id="3-10_GLUE_u6A21_u5F0F_u4EFB_u52A1"><a href="#3-10_GLUE_u6A21_u5F0F_u4EFB_u52A1" class="headerlink" title="3.10 GLUE模式任务"></a>3.10 GLUE模式任务</h4><p>开发步骤：GLUE模式任务的开发步骤比较简单，进入GLUE编辑界面，在Demo任务代码的execute方法中写入任务逻辑即可；可使用@Resource或@Autoward注解注入“执行器”项目中的Spring服务；</p>
<p>原理：每个Glue任务的代码，实际上是“一个继承自“IJobHandler”的实现类的类代码”，“执行器”接收到“调度中心”的调度请求时，会通过Groovy类加载器加载此代码，实例化成Java对象，同时注入此代码中声明的Spring服务（请确保Glue代码中的服务和类引用在“执行器”项目中存在），然后调用该对象的execute方法，执行任务逻辑。</p>
<h4 id="3-11__u6267_u884C_u5668"><a href="#3-11__u6267_u884C_u5668" class="headerlink" title="3.11 执行器"></a>3.11 执行器</h4><p>执行器实际上是一个内嵌的Jetty服务器，默认端口9999。</p>
<p>在项目启动时，执行器会通过“@JobHander”识别Spring容器中“Bean模式任务”，以注解的name属性为key管理起来。</p>
<p>“执行器”接收到“调度中心”的调度请求时，如果任务类型为“Bean模式”，将会匹配Spring容器中的“Bean模式任务”，然后调用其execute方法，执行任务逻辑。如果任务类型为“GLUE模式”，将会加载GLue代码，实例化Java对象，注入依赖的Spring服务（注意：Glue代码中注入的Spring服务，必须存在与该“执行器”项目的Spring容器中），然后调用execute方法，执行任务逻辑。</p>
<p><img src="https://static.oschina.net/uploads/img/201606/14125907_Eajh.png" alt="输入图片说明" title="在这里输入图片标题"></p>
<h4 id="3-12__u4EFB_u52A1_u65E5_u5FD7"><a href="#3-12__u4EFB_u52A1_u65E5_u5FD7" class="headerlink" title="3.12 任务日志"></a>3.12 任务日志</h4><p>XXL-JOB会为每次调度请求生成一个单独的日志文件，通过重写LOG4J的Appender实现如下图的数据1处，“调度中心”查看执行日志时将会加载对应的日志文件。</p>
<p>需要注意的是，“执行器”中日志Appender上配置的包名（如下图数据3处），需要覆盖到所有任务（Bean模式 + GLUE模式）的包名，否则覆盖不到的任务将不会生成日志文件。</p>
<p><img src="https://static.oschina.net/uploads/img/201606/14125931_Digy.png" alt="输入图片说明" title="在这里输入图片标题"></p>
<p>单独日志文件存放的位置可在“执行器”的log.xml文件进行自定义，如上图中的数字2的位置所示，默认位置为项目磁盘根目录下“/logs/xxl-job/”；</p>
<p>目录格式为：/logs/xxl-job/ “格式化日期”/“数据库调度日志记录的主键ID . log”。</p>
<h4 id="3-13__u7CFB_u7EDF_u622A_u56FE"><a href="#3-13__u7CFB_u7EDF_u622A_u56FE" class="headerlink" title="3.13 系统截图"></a>3.13 系统截图</h4><p>登陆截图：</p>
<p><img src="https://static.oschina.net/uploads/img/201606/14125958_3lh1.png" alt="输入图片说明" title="在这里输入图片标题"></p>
<p>任务列表：</p>
<p><img src="https://static.oschina.net/uploads/img/201606/14130011_B19K.png" alt="输入图片说明" title="在这里输入图片标题"></p>
<p>任务配置截图：</p>
<p><img src="https://static.oschina.net/uploads/img/201606/14130021_CeGE.png" alt="输入图片说明" title="在这里输入图片标题"></p>
<p>在线开发任务GLUE代码，Wed IDE截图：</p>
<p><img src="https://static.oschina.net/uploads/img/201606/14130036_tZPO.png" alt="输入图片说明" title="在这里输入图片标题"></p>
<h2 id="u56DB__u7248_u672C_u66F4_u65B0"><a href="#u56DB__u7248_u672C_u66F4_u65B0" class="headerlink" title="四 版本更新"></a>四 版本更新</h2><h4 id="4-1__u7248_u672C_V1-1-x_uFF0C_u65B0_u7279_u6027"><a href="#4-1__u7248_u672C_V1-1-x_uFF0C_u65B0_u7279_u6027" class="headerlink" title="4.1 版本 V1.1.x，新特性"></a>4.1 版本 V1.1.x，新特性</h4><p><strong>【于V1.1.x版本，XXL-JOB正式应用于我司，内部定制别名为 “Ferrari”，新接入应用推荐使用最新版本V1.3.x】</strong></p>
<ul>
<li>1、简单：支持通过Web页面对任务进行CRUD操作，操作简单，一分钟上手；</li>
<li>2、动态：支持动态修改任务状态，动态暂停/恢复任务，即时生效；</li>
<li>3、服务HA：任务信息持久化到mysql中，Job服务天然支持集群，保证服务HA；</li>
<li>4、任务HA：某台Job服务挂掉，任务会平滑分配给其他的某一台存活服务，即使所有服务挂掉，重启时或补偿执行丢失任务；</li>
<li>5、一个任务只会在其中一台服务器上执行；</li>
<li>6、任务串行执行；</li>
<li>7、支持自定义参数；</li>
<li>8、支持远程任务执行终止；</li>
</ul>
<h4 id="4-2__u7248_u672C_V1-2-x_uFF0C_u65B0_u7279_u6027"><a href="#4-2__u7248_u672C_V1-2-x_uFF0C_u65B0_u7279_u6027" class="headerlink" title="4.2 版本 V1.2.x，新特性"></a>4.2 版本 V1.2.x，新特性</h4><ul>
<li>1、支持任务分组；</li>
<li>2、支持“本地任务”、“远程任务”；</li>
<li>3、底层通讯支持两种方式，Servlet方式 + JETTY方式；</li>
<li>4、支持“任务日志”；</li>
<li><p>5、支持“串行执行”，并行执行；</p>
<p>  说明：V1.2版本将系统架构按功能拆分为：</p>
<pre><code>- 调度模块（调度中心）：负责管理调度信息，按照调度配置发出调度请求；
- 执行模块（执行器）：负责接收调度请求并执行任务逻辑；
- 通讯模块：负责调度模块和任务模块之间的信息通讯；
</code></pre><p>  优点：</p>
<pre><code>- 解耦：任务模块提供任务接口，调度模块维护调度信息，业务相互独立；
- 高扩展性；
- 稳定性；
</code></pre></li>
</ul>
<h4 id="4-3__u7248_u672C_V1-3-0_uFF0C_u65B0_u7279_u6027"><a href="#4-3__u7248_u672C_V1-3-0_uFF0C_u65B0_u7279_u6027" class="headerlink" title="4.3 版本 V1.3.0，新特性"></a>4.3 版本 V1.3.0，新特性</h4><ul>
<li>1、遗弃“本地任务”模式，推荐使用“远程任务”，易于系统解耦，任务对应的JobHander统称为“执行器”；</li>
<li>2、遗弃“servlet”方式底层系统通讯，推荐使用JETTY方式，调度+回调双向通讯，重构通讯逻辑；</li>
<li>3、UI交互优化：左侧菜单展开状态优化，菜单项选中状态优化，任务列表打开表格有压缩优化；</li>
<li><p>4、【重要】“执行器”细分为：BEAN、GLUE两种开发模式，简介见下文：</p>
<p>  “执行器” 模式简介：</p>
<pre><code>- BEAN模式执行器：每个执行器都是Spring的一个Bean实例，XXL-JOB通过注解@JobHander识别和调度执行器；
 -GLUE模式执行器：每个执行器对应一段代码，在线Web编辑和维护，动态编译生效，执行器负责加载GLUE代码和执行；
</code></pre></li>
</ul>
<h4 id="4-4__u7248_u672C_V1-3-1_uFF0C_u65B0_u7279_u6027"><a href="#4-4__u7248_u672C_V1-3-1_uFF0C_u65B0_u7279_u6027" class="headerlink" title="4.4 版本 V1.3.1，新特性"></a>4.4 版本 V1.3.1，新特性</h4><ul>
<li>1、更新项目目录结构：<ul>
<li>/xxl-job-admin ——————– 【调度中心】：负责管理调度信息，按照调度配置发出调度请求；</li>
<li>/xxl-job-core ———————– 公共依赖</li>
<li>/xxl-job-executor-example —— 【执行器】：负责接收调度请求并执行任务逻辑；</li>
<li>/db ———————————- 建表脚本</li>
<li>/doc ——————————— 用户手册</li>
</ul>
</li>
<li>2、在新的目录结构上，升级了用户手册；</li>
<li>3、优化了一些交互和UI；</li>
</ul>
<h4 id="4-5__u7248_u672C_V1-3-2_uFF0C_u65B0_u7279_u6027"><a href="#4-5__u7248_u672C_V1-3-2_uFF0C_u65B0_u7279_u6027" class="headerlink" title="4.5 版本 V1.3.2，新特性"></a>4.5 版本 V1.3.2，新特性</h4><ul>
<li>1、调度逻辑进行事务包裹；</li>
<li>2、执行器异步回调执行日志；</li>
<li>3、【重要】在 “调度中心” 支持HA的基础上，扩展执行器的Failover支持，支持配置多执行期地址；</li>
</ul>
<h4 id="u89C4_u5212_u4E2D"><a href="#u89C4_u5212_u4E2D" class="headerlink" title="规划中"></a>规划中</h4><ul>
<li>1、任务终止时，任务队列中调度回调通过被终止的接口；</li>
<li>2、任务执行规则自定义：假如前一个任务正在执行，后续调度执行规则支持自定义；<pre><code>串行（默认，当前逻辑）：后续调度入调度队列；
并行：后续调度并行执行；
Pass：后续调度被Pass；
</code></pre></li>
<li>3、兼容oracle；</li>
<li>4、任务依赖；</li>
</ul>
</div></article></div></section><footer><div class="paginator"><a href="/2016/05/31/tengkai/quartz/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2016 <a href="https://github.com/w4c101">w4c101</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-72551441-1",'auto');ga('send','pageview');</script></body></html>